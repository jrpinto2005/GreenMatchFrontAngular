<app-barra-superior></app-barra-superior>

<main class="chat-page">
  <section class="chat-card" aria-label="Conversacion">
    <div class="chat-card__messages" role="log" aria-live="polite">
      <ng-container *ngIf="messages.length > 0; else emptyState">
        <div
          *ngFor="let msg of messages"
          class="chat-card__message"
          [class.chat-card__message--self]="msg.sender === 'user'"
          role="listitem">
          <span>{{ msg.content }}</span>
        </div>
      </ng-container>
    </div>

    <ng-template #emptyState>
      <div class="chat-card__empty" role="presentation">
        <img src="assets/chat-verde.png" alt="Ilustracion de chat" loading="lazy" />
        <h2>Bienvenido al chat</h2>
        <p>Envia tu primer mensaje para iniciar la conversacion.</p>
      </div>
    </ng-template>

    <form class="chat-card__composer" (ngSubmit)="handleSubmit()" novalidate>
      <label class="visually-hidden" for="chat-message">Escribe tu mensaje</label>
      <div class="chat-card__input">
        <input
          id="chat-message"
          name="message"
          type="text"
          [(ngModel)]="newMessage"
          placeholder="Escribe un mensaje..."
          autocomplete="off"
          aria-label="Mensaje a enviar" />
      </div>
      <button
        class="chat-card__send"
        type="submit"
        [disabled]="!newMessage.trim()">
        Enviar
      </button>
    </form>
  </section>
</main>

<app-barra-inferior></app-barra-inferior>

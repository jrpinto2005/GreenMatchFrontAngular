<section class="auth">
  <header class="auth__header">
    <div class="auth__brand">
      <img src="assets/logo-cream.png" alt="GreenMatch" width="52" height="52" />
      <div>
        <h1>GreenMatch</h1>
        <p>Conecta con tus plantas</p>
      </div>
    </div>
    <a routerLink="/" class="auth__ghost">Volver a la landing</a>
  </header>

  <div class="auth__grid">
    <article class="auth__card">
      <nav class="auth__tabs" aria-label="Cambiar modo de autenticacion">
        <button
          type="button"
          (click)="setMode('login')"
          [class.auth__tab--active]="mode() === 'login'">
          Iniciar sesion
        </button>
        <button
          type="button"
          (click)="setMode('register')"
          [class.auth__tab--active]="mode() === 'register'">
          Registrarme
        </button>
        <button
          type="button"
          (click)="setMode('reset')"
          [class.auth__tab--active]="mode() === 'reset'">
          Recuperar clave
        </button>
      </nav>

      <p class="auth__intro">
        {{
          mode() === 'login'
            ? 'Ingresa con tu usuario o correo para chatear.'
            : mode() === 'register'
              ? 'Crea una cuenta para guardar tus conversaciones.'
              : 'Actualiza tu contrasena si la olvidaste.'
        }}
      </p>

      <div *ngIf="feedback()" class="auth__feedback" [class.auth__feedback--ok]="feedback()?.ok">
        {{ feedback()?.message }}
      </div>

      <form *ngIf="mode() === 'login'" [formGroup]="loginForm" (ngSubmit)="submitLogin()" novalidate>
        <label class="auth__field">
          <span>Usuario o correo</span>
          <input
            type="text"
            placeholder="greenfriend o demo@greenmatch.app"
            formControlName="identifier" />
        </label>
        <label class="auth__field">
          <span>Contrasena</span>
          <input type="password" placeholder="******" formControlName="password" />
        </label>
        <button class="auth__cta" type="submit">
          {{ isLoading() ? 'Validando...' : 'Entrar al chat' }}
        </button>
      </form>

      <form
        *ngIf="mode() === 'register'"
        [formGroup]="registerForm"
        (ngSubmit)="submitRegister()"
        novalidate>
        <label class="auth__field">
          <span>Nombre</span>
          <input type="text" placeholder="Tu nombre" formControlName="name" />
        </label>
        <label class="auth__field">
          <span>Usuario</span>
          <input type="text" placeholder="ej. monsteraqueen" formControlName="username" />
        </label>
        <label class="auth__field">
          <span>Correo</span>
          <input type="email" placeholder="hola@greenmatch.app" formControlName="email" />
        </label>
        <div class="auth__row">
          <label class="auth__field">
            <span>Contrasena</span>
            <input type="password" placeholder="Minimo 6 caracteres" formControlName="password" />
          </label>
          <label class="auth__field">
            <span>Confirma</span>
            <input type="password" placeholder="Repite tu contrasena" formControlName="confirmPassword" />
          </label>
        </div>
        <button class="auth__cta" type="submit">
          {{ isLoading() ? 'Creando...' : 'Crear cuenta' }}
        </button>
      </form>

      <form *ngIf="mode() === 'reset'" [formGroup]="resetForm" (ngSubmit)="submitReset()" novalidate>
        <label class="auth__field">
          <span>Usuario o correo</span>
          <input type="text" placeholder="Con lo que inicias sesion" formControlName="identifier" />
        </label>
        <label class="auth__field">
          <span>Nueva contrasena</span>
          <input type="password" placeholder="Escribe la nueva" formControlName="newPassword" />
        </label>
        <button class="auth__cta" type="submit">
          {{ isLoading() ? 'Guardando...' : 'Actualizar contrasena' }}
        </button>
      </form>
    </article>

    <aside class="auth__aside">
      <div class="auth__demo">
        <h2>Prueba rapida</h2>
        <p>
          Usuario: <strong>{{ demoCredentials().username }}</strong><br />
          Clave: <strong>{{ demoCredentials().password }}</strong>
        </p>
        <p>Usalos para entrar directo al chat.</p>
      </div>
      <ul class="auth__perks">
        <li>
          <span>*</span>
          Acceso inmediato al chat verde.
        </li>
        <li>
          <span>*</span>
          Guardamos tus datos en tu dispositivo.
        </li>
        <li>
          <span>*</span>
          Un solo login para tu calendario y wants.
        </li>
      </ul>
      <a routerLink="/" class="auth__ghost auth__ghost--block">Descubrir beneficios</a>
    </aside>
  </div>
</section>

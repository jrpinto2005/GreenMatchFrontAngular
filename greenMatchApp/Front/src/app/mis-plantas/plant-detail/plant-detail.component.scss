/* ===========================
   Paleta GreenMatch (local)
   =========================== */
:root {
  --gm-bg: #f7f9ef;
  --gm-surface: #fffff8;
  --gm-primary: #4a7f3b;     /* verde hoja */
  --gm-primary-2: #88a66b;   /* verde suave */
  --gm-accent: #8a7d18;      /* dorado/oliva */
  --gm-ink: #151e08;
  --gm-ink-2: #52510b;
  --gm-ink-3: #77763a;
  --gm-line: #e4e5c7;
  --gm-glass: rgba(255,255,255,0.68);
  --gm-shadow: 0 14px 44px rgba(20, 24, 10, 0.14);
}

/* ===========================
   Layout / Wrapper
   =========================== */
.detail {
  display: flex;
  justify-content: center;
  padding: clamp(1rem, 3vw, 2rem);
  background: linear-gradient(140deg, var(--gm-bg), #ffffee 45%, #f2f6e6);
  min-height: calc(100vh - 120px);
}

.wrap {
  width: 100%;
  max-width: 980px;
  border-radius: 22px;
  border: 1px solid var(--gm-line);  /* borde sutil */
  box-shadow: var(--gm-shadow);
  padding: 0;
  overflow: hidden;
}

.glass { background: var(--gm-glass); backdrop-filter: blur(10px) saturate(120%); }
.glass-soft { background: rgba(255,255,255,0.55); backdrop-filter: blur(6px); }

/* ===========================
   HERO
   =========================== */
.hero {
  position: relative;
  margin: 0;
  aspect-ratio: 16 / 6;
  overflow: hidden;
  border-bottom: 1px solid var(--gm-line);

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: saturate(1.05);
    display: block;
  }
}

.hero-badge {
  position: absolute; left: 14px; bottom: 14px;
  background: rgba(238, 240, 207, .88);
  color: var(--gm-ink-2);
  border: 1px solid #dde0b1;
  border-radius: 999px;
  padding: .28rem .6rem;
  font-weight: 700;
  backdrop-filter: blur(4px);
}

/* ===========================
   Header
   =========================== */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: .75rem;
  padding: 1rem 1.25rem;
}

.title-block { display:flex; flex-direction:column; gap:.35rem; }

.title {
  margin:0; color:var(--gm-ink); font-weight:850; letter-spacing:.2px;
  font-size: clamp(1.35rem, 3vw, 1.85rem);
}

.nickname { color: var(--gm-ink-3); font-weight: 600; }

.chips { display:flex; gap:.45rem; flex-wrap: wrap; }
.chip {
  background:#eef0cf; color:var(--gm-ink-2);
  border-radius:999px; padding:.28rem .6rem; font-size:.85rem; font-weight:700;
  border:1px solid #dde0b1;
}
.chip--muted { background:#f0e7cf; color:#7a5a00; border-color:#e8d9b2; }

.header-actions { display:flex; gap:.6rem; }

/* === Botones elegantes tipo píldora === */
.btn-cp, .btn-back {
  border-radius: 999px;
  padding:.65rem 1rem;
  font-weight:600;
  letter-spacing:.2px;
  cursor:pointer;
  transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease, background-color .2s ease;
}
/* Sólido oliva */
.btn-cp{
  color:#ffffff;
  background: linear-gradient(180deg, #5a8f47, #4a7f3b);
  border:1px solid #466f36;
  box-shadow: 0 8px 20px rgba(74,127,59,.22);
}
.btn-cp:hover{ transform: translateY(-1px); box-shadow: 0 12px 28px rgba(74,127,59,.28); }

/* Outline oliva (translúcido, NO blanco) */
.btn-back{
  color:#4a7f3b;
  background: rgba(90, 143, 71, .10);
  border:1px solid rgba(74,127,59,.35);
  backdrop-filter: blur(6px);
}
.btn-back:hover{
  transform: translateY(-1px);
  background: rgba(90, 143, 71, .16);
  box-shadow: 0 10px 20px rgba(74,127,59,.12);
}

/* ===========================
   CAREPLAN — Super Upgrade
   =========================== */

/* Title con subrayado vivo y sticky suave */
/* --- FIX al “cuadrado” debajo del título de Plan de cuidado --- */
.careplan {
  position: relative;
  isolation: isolate;            /* evita que se mezcle el blur con lo de atrás */
  overflow: hidden;              /* recorta sombras de los primeros tiles */
  margin-top: .2rem;
}

/* Mueve el degradado suave al fondo de la sección (no al H2) */
.careplan::before {
  content: "";
  position: absolute;
  inset: 0 0 auto 0;
  height: 72px;                  /* altura de la “faja” superior */
  background: linear-gradient(
    180deg,
    rgba(247, 249, 239, .85),
    rgba(247, 249, 239, .55) 60%,
    rgba(247, 249, 239, 0)
  );
  pointer-events: none;
  z-index: 0;
}

/* Título sticky sin fondo (elimina el bloque visible) */
.section-title {
  position: sticky;
  top: 0;
  z-index: 2;                    /* sobre el fondo, debajo de las tarjetas */
  background: transparent !important;
  border: 0;
  padding-block: .75rem .5rem;
  margin: .6rem 1.25rem .4rem;
}

/* Asegura que el grid esté por encima del fondo degradado */
.plan-grid { position: relative; z-index: 1; }

/* Suaviza la primera tarjeta para que no “marque” un recuadro duro */
.plan-grid > .card:first-child,
.plan-grid > .glass-soft:first-child,
.plan-grid > .plan-tile:first-child {
  box-shadow: 0 12px 32px rgba(20, 24, 10, 0.08);
}

/* Evita colapso de márgenes entre el título y el grid */
.plan-grid { padding-top: .25rem; }


/* Grid más aireado, con columnas fluidas y auto-fit */
.plan-grid {
  --tile-min: 280px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--tile-min), 1fr));
  gap: clamp(.8rem, 2vw, 1.1rem);
  padding: 0 1.1rem 1.25rem;
}

/* Tarjetas con glass premium + borde gradiente suave */
.card,
.glass-soft,
.plan-tile {
  position: relative;
  background: linear-gradient(180deg, rgba(255,255,255,.68), rgba(255,255,255,.55));
  border-radius: 18px;
  padding: clamp(.85rem, 1.6vw, 1.05rem) clamp(.9rem, 1.6vw, 1.15rem);
  border: 1px solid color-mix(in oklab, var(--gm-line) 85%, transparent);
  box-shadow: 0 18px 44px rgba(20,24,10,.08), inset 0 1px 0 rgba(255,255,255,.35);
  overflow: hidden;
  transition: transform .18s ease, box-shadow .2s ease, border-color .2s ease, background-color .2s ease;
}

/* Borde “botánico” animado ultra sutil (solo hover/focus) */
.card::before,
.glass-soft::before,
.plan-tile::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background:
    linear-gradient(140deg,
      rgba(74,127,59,.35),
      rgba(136,166,107,.25),
      rgba(138,125,24,.28),
      rgba(74,127,59,.35));
  opacity: 0;
  mask: linear-gradient(#000, #000) content-box, linear-gradient(#000, #000);
  -webkit-mask:
    linear-gradient(#000, #000) content-box,
    linear-gradient(#000, #000);
  padding: 1px;
  transition: opacity .25s ease;
  pointer-events: none;
}
.card:hover::before,
.card:focus-within::before,
.plan-tile:hover::before,
.plan-tile:focus-within::before { opacity: .55; }

/* Elevación y “tilt” mínimo al hover */
.plan-tile:hover {
  transform: translateY(-2px);
  box-shadow: 0 24px 54px rgba(20,24,10,.12);
}

/* Cabeceras y tipografía dentro del plan */
.plan-tile h4 {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  margin: 0 0 .4rem;
  color: var(--gm-ink-2);
  font-weight: 850;
  letter-spacing: .03em;
  text-transform: uppercase;
  font-size: .95rem;
}

/* Punto/icono decorativo en los títulos */
.plan-tile h4::before {
  content: "";
  width: .6rem; height: .6rem;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 40%, var(--gm-primary) 0%, var(--gm-accent) 100%);
  filter: saturate(120%);
  box-shadow: 0 0 0 2px rgba(74,127,59,.10);
}

/* Kicker (frecuencia/tipo) como “pill” premium */
.em,
.kicker {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .28rem .6rem;
  border-radius: 999px;
  background: color-mix(in oklab, #ffffff 75%, var(--gm-bg));
  border: 1px solid color-mix(in oklab, var(--gm-primary) 35%, var(--gm-line) 65%);
  color: var(--gm-primary);
  font-weight: 800;
  letter-spacing: .15px;
  margin-bottom: .25rem;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.6);
}
.em::before,
.kicker::before {
  content: "•";
  transform: translateY(-1px);
  color: color-mix(in oklab, var(--gm-primary) 70%, var(--gm-accent));
}

/* Texto de soporte */
.plan-tile p { margin: 0; color: var(--gm-ink-3); line-height: 1.35; }

/* Bloques que ocupan todo el ancho */
.plan-tile--full,
.card.full { grid-column: 1 / -1; }

/* Alertas con badges y lista modernita */
.alertas {
  margin: .35rem 0 0 0;
  padding-left: 0;
  list-style: none;
  display: grid;
  gap: .35rem;
}
.alertas li {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .4rem .6rem;
  border-radius: 12px;
  border: 1px dashed color-mix(in oklab, var(--gm-accent) 40%, var(--gm-line));
  background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.55));
  color: color-mix(in oklab, var(--gm-ink) 84%, var(--gm-accent));
  box-shadow: 0 6px 16px rgba(0,0,0,.04);
}
.alertas li::before {
  content: "⚠";
  font-size: .95rem;
  filter: saturate(110%);
}

/* Meta del plan */
.plan-meta {
  color: color-mix(in oklab, var(--gm-ink-3) 70%, var(--gm-moss, #738b4e));
  display: block;
  margin: .4rem 1.25rem 0;
  font-weight: 600;
}

/* Estado “no plan” más aspiracional */
/* mueve la tarjeta "no-plan" a la derecha */
.no-plan {
  margin-left: clamp(0rem, 1.4vw, 3rem);
  max-width: 560px;              /* evita que se haga full-width */
  /* (tu estilo actual) */
  background: transparent;
  box-shadow: none;


}

.no-plan__text p { font-weight: 800; letter-spacing:.2px; }
.no-plan__text small { opacity: .9; }

/* CTA más glam (ya tienes .btn-cp; le damos pulido) */
.btn-cp {
  background: linear-gradient(180deg, #5a8f47, #4a7f3b);
  border: 1px solid #3f6e33;
  box-shadow: 0 12px 26px rgba(74,127,59,.25), inset 0 1px 0 rgba(255,255,255,.35);
  transition: transform .14s ease, box-shadow .2s ease, filter .14s ease;
}
.btn-cp:active { transform: translateY(0); filter: brightness(.98); }

/* Micro-animación de “aparición” */
@keyframes planIn {
  from { transform: translateY(6px); opacity: 0; }
  to   { transform: translateY(0);   opacity: 1; }
}
.plan-grid > * { animation: planIn .28s ease both; }
.plan-grid > *:nth-child(2) { animation-delay: .03s; }
.plan-grid > *:nth-child(3) { animation-delay: .06s; }
.plan-grid > *:nth-child(4) { animation-delay: .09s; }
.plan-grid > *:nth-child(5) { animation-delay: .12s; }
.plan-grid > *:nth-child(6) { animation-delay: .15s; }

/* Accesibilidad: respetar reduce-motion */
@media (prefers-reduced-motion: reduce) {
  .plan-grid > * { animation: none !important; }
  .card,
  .plan-tile { transition: none !important; }
}

/* Dark(ish) mode soporte suave (si usas clase .dark en body) */
.dark .plan-grid .plan-tile,
.dark .card,
.dark .glass-soft {
  background: linear-gradient(180deg, rgba(28,32,24,.55), rgba(24,28,22,.45));
  border-color: color-mix(in oklab, var(--gm-line) 25%, #1a1f18);
  box-shadow: 0 18px 44px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.06);
}
.dark .em,
.dark .kicker {
  background: color-mix(in oklab, #1f241b 70%, var(--gm-bg));
  border-color: color-mix(in oklab, var(--gm-primary) 45%, #2a3426);
  color: color-mix(in oklab, #dff0da 85%, var(--gm-primary));
}
.dark .alertas li {
  background: linear-gradient(180deg, rgba(38,44,34,.7), rgba(34,40,31,.6));
  border-color: color-mix(in oklab, var(--gm-accent) 35%, #2c2c1f);
  color: #e8ecd8;
}

/* ===========================
   Skeletons (loading)
   =========================== */
.skeleton {
  height: 16px; border-radius: 12px;
  background: linear-gradient(90deg,#eee,#f7f7f7,#eee);
  background-size: 200% 100%;
  animation: shimmer 1.2s infinite;

  &.title { width: 60%; height: 28px; margin: .8rem 1.25rem .6rem; }
  &.chips { width: 35%; height: 20px; margin: 0 1.25rem .9rem; }
  &.block { width: 100%; height: 90px; border-radius: 18px; }
  &.block.wide { width: 100%; height: 120px; border-radius: 18px; }
}
@keyframes shimmer { 0% { background-position: 200% 0 } 100% { background-position: -200% 0 } }

/* ===========================
   Responsive
   =========================== */
@media (max-width: 820px) {
  .section-title { margin: .4rem 1rem .5rem; }
  .plan-grid { grid-template-columns: 1fr; }
  .header { flex-direction: column; align-items: stretch; gap: .6rem; }
  .hero { aspect-ratio: 16 / 9; }
}
